# origin

## s10

D:/RL/_1repertory_log/230616_data/flat_ped_sim_0502_sparse_polar2p_limit/s10_scence_analyze.json
Success rate: 0.892
Collide rate: 0.101
Timeout rate: 0.007
Time mean and std: (5.458295964125562, 3.07088318788925)
Distance mean and std: (12.19380258377947, 6.648939116316556)
Velocity mean and std: (2.1814115907994776, 0.4180039553433546)
Acceleration mean and std: (0.3406048142240601, 1.3899974545250047)
Jerk mean and std: (-0.5479953852650357, 4.029462399353588)_

D:/RL/_1repertory_log/230616_data/flat_ped_sim_0430_e2e/s10_scence_analyze.json
Success rate: 0.76
Collide rate: 0.24
Timeout rate: 0.0
Time mean and std: (4.018947368421052, 2.2042384882356516)
Distance mean and std: (11.280949623233028, 6.260821716466682)
Velocity mean and std: (2.870262362079088, 0.2659491689267244)
Acceleration mean and std: (-0.030924749744982126, 1.0225230248251087)
Jerk mean and std: (-0.569421505854531, 11.824409299715107)

D:/RL/_1repertory_log/230616_data/flat_ped_sim_0424_convex_vel/s10_scence_analyze.json
Success rate: 0.76
Collide rate: 0.24
Timeout rate: 0.0
Time mean and std: (4.043815789473684, 2.1898723028771765)
Distance mean and std: (11.10631894091705, 6.1861590750384154)
Velocity mean and std: (2.8015701989247095, 0.23157592938300156)
Acceleration mean and std: (-0.02343740958884766, 1.4635458444541793)
Jerk mean and std: (-0.09053396381234045, 22.45094795360481)_


D:/RL/_1repertory_log/230616_data/flat_ped_sim_0506polar1p/s10_scence_analyze.json
Success rate: 0.903
Collide rate: 0.084
Timeout rate: 0.013
Time mean and std: (8.981838316722039, 5.173276821981263)
Distance mean and std: (15.265056301741017, 8.291626086994773)
Velocity mean and std: (1.7183554662064455, 0.41989429079340085)
Acceleration mean and std: (0.2529851995589372, 1.925211755281112)
Jerk mean and std: (-0.08286446370301105, 7.034678698666987)

D:/RL/_1repertory_log/230616_data/flat_ped_sim_0510_scan2p/s10_scence_analyze.json
Success rate: 0.83
Collide rate: 0.17
Timeout rate: 0.0
Time mean and std: (5.017108433734941, 2.5691443093407633)
Distance mean and std: (11.661333759330097, 6.310652316415711)
Velocity mean and std: (2.2275589748134212, 0.39127546700910365)
Acceleration mean and std: (0.5308314972868071, 1.3127961248723232)
Jerk mean and std: (-0.22858243537094974, 4.782239114548171)

## s10d5

D:/RL/_1repertory_log/230616_data/flat_ped_sim_0502_sparse_polar2p_limit/s10d5_scence_analyze.json
Success rate: 0.891
Collide rate: 0.107
Timeout rate: 0.002
Time mean and std: (5.8730639730639735, 3.3260650615836194)
Distance mean and std: (13.039458914072442, 7.311559890078633)
Velocity mean and std: (2.171883787551489, 0.39500326582449724)
Acceleration mean and std: (0.31491155803871523, 1.3967463093103727)
Jerk mean and std: (-0.5072818725044919, 4.14733210872822)

D:/RL/_1repertory_log/230616_data/flat_ped_sim_0430_e2e/s10d5_scence_analyze.json
Success rate: 0.799
Collide rate: 0.201
Timeout rate: 0.0
Time mean and std: (4.025907384230288, 2.1537503214142024)
Distance mean and std: (11.3769290572205, 6.149951653755341)
Velocity mean and std: (2.901511174204598, 0.258042918724548)
Acceleration mean and std: (-0.07093118993229192, 1.2758032084381656)
Jerk mean and std: (-0.11009615481611836, 16.929439925905516)

D:/RL/_1repertory_log/230616_data/flat_ped_sim_0424_convex_vel/s10d5_scence_analyze.json
Success rate: 0.79
Collide rate: 0.21
Timeout rate: 0.0
Time mean and std: (3.984303797468355, 2.1026340825075316)
Distance mean and std: (11.400188267101845, 6.203674520407184)
Velocity mean and std: (2.886211665775861, 0.21639641577153795)
Acceleration mean and std: (-0.0686382163079036, 2.2180996570076568)
Jerk mean and std: (0.02019171681601661, 35.92808970268097)

D:/RL/_1repertory_log/230616_data/flat_ped_sim_0506polar1p/s10d5_scence_analyze.json
Success rate: 0.878
Collide rate: 0.112
Timeout rate: 0.01
Time mean and std: (8.78633257403189, 5.024572420400122)
Distance mean and std: (15.427815942209016, 8.551065919429552)
Velocity mean and std: (1.7745432731809327, 0.40151939567370054)
Acceleration mean and std: (0.2614934202776852, 1.7933160828438672)
Jerk mean and std: (-0.09758895341730862, 6.579629083993924)

D:/RL/_1repertory_log/230616_data/flat_ped_sim_0510_scan2p/s10d5_scence_analyze.json
Success rate: 0.835
Collide rate: 0.165
Timeout rate: 0.0
Time mean and std: (4.926946107784431, 2.382341150292516)
Distance mean and std: (11.590200070565706, 6.259454865393993)
Velocity mean and std: (2.2380993172565264, 0.39333240746383513)
Acceleration mean and std: (0.5394121397618405, 1.329118255773378)
Jerk mean and std: (-0.24687652305356664, 4.950822909151155)

## s10d10

D:/RL/_1repertory_log/230616_data/flat_ped_sim_0502_sparse_polar2p_limit/s10d10_scence_analyze.json
Success rate: 0.855
Collide rate: 0.142
Timeout rate: 0.003
Time mean and std: (5.824327485380119, 3.2743972238112824)
Distance mean and std: (12.515074427739863, 7.060831872824558)
Velocity mean and std: (2.100393828561155, 0.40570901830290707)
Acceleration mean and std: (0.3140668847698523, 1.3924926394282158)
Jerk mean and std: (-0.5017348914768998, 4.253626880410176)

D:/RL/_1repertory_log/230616_data/flat_ped_sim_0430_e2e/s10d10_scence_analyze.json
Success rate: 0.809
Collide rate: 0.191
Timeout rate: 0.0
Time mean and std: (3.9121137206427687, 2.2201574810059923)
Distance mean and std: (11.249161737888993, 6.492890102565235)
Velocity mean and std: (2.9511770622737052, 0.2522733454336332)
Acceleration mean and std: (-0.04849684836951725, 1.6782379383412769)
Jerk mean and std: (-0.3802911782754898, 24.719344179669182)

D:/RL/_1repertory_log/230616_data/flat_ped_sim_0424_convex_vel/s10d10_scence_analyze.json
Success rate: 0.751
Collide rate: 0.249
Timeout rate: 0.0
Time mean and std: (3.789613848202397, 2.201512307959805)
Distance mean and std: (10.77961154218187, 6.315520631169311)
Velocity mean and std: (2.8975470785732873, 0.24997397688354644)
Acceleration mean and std: (-0.10180772083828633, 2.100714793793282)
Jerk mean and std: (0.35774659724440055, 32.99234625307884)

D:/RL/_1repertory_log/230616_data/flat_ped_sim_0506polar1p/s10d10_scence_analyze.json
Success rate: 0.845
Collide rate: 0.145
Timeout rate: 0.01
Time mean and std: (9.029467455621303, 5.4022542150449055)
Distance mean and std: (15.132544690043202, 8.672848130047969)
Velocity mean and std: (1.699087115017122, 0.4050107252193494)
Acceleration mean and std: (0.2489326750419551, 1.767790252354046)
Jerk mean and std: (-0.08088756586162574, 6.479587765619464)

D:/RL/_1repertory_log/230616_data/flat_ped_sim_0510_scan2p/s10d10_scence_analyze.json
Success rate: 0.837
Collide rate: 0.163
Timeout rate: 0.0
Time mean and std: (4.8237753882915175, 2.5230542427374996)
Distance mean and std: (11.195459112466382, 6.499822120994874)
Velocity mean and std: (2.1993747700833266, 0.3832927486351752)
Acceleration mean and std: (0.5476836524203221, 1.3202513157333686)
Jerk mean and std: (-0.2629460099581434, 4.82205397631546)

## convex_2p

#### d10

Data Analysis from: D:/RL/_1repertory_log/230616_data/data_collected_analyze_10d.json

== Rates ==
Success Rate: 86.7%
Collide Rate: 13.3%
Timeout Rate: 0.0%

== Time and Distance ==
Time - Mean: 2.9, Std Dev: 1.7
Distance - Mean: 4.65, Std Dev: 2.51

== Step Velocity, Acceleration, and Jerk ==
Velocity - Mean: 1.58, Std Dev: 0.44
Acceleration - Mean: 0.61, Std Dev: 1.45
Jerk - Mean: -0.92, Std Dev: 4.09

== Absolute Values ==
Abs Acceleration - Mean: 1.26, Std Dev: 0.95
Abs Jerk - Mean: 3.33, Std Dev: 2.54
Total Abs Acceleration: 30437.91
Total Abs Jerk: 77829.83

== Episode Acceleration, and Jerk ==
Eps Acceleration - Mean: 1.38, Std Dev: 0.36
Eps Jerk - Mean: 3.57, Std Dev: 0.92

#### d20

Data Analysis from: D:/RL/_1repertory_log/230616_data/data_collected_analyze_20d.json

== Rates ==
Success Rate: 74.6%
Collide Rate: 25.4%
Timeout Rate: 0.0%

== Time and Distance ==
Time - Mean: 3.0, Std Dev: 1.8
Distance - Mean: 4.35, Std Dev: 2.43

== Step Velocity, Acceleration, and Jerk ==
Velocity - Mean: 1.46, Std Dev: 0.41
Acceleration - Mean: 0.58, Std Dev: 1.37
Jerk - Mean: -0.84, Std Dev: 4.17

== Absolute Values ==
Abs Acceleration - Mean: 1.20, Std Dev: 0.89
Abs Jerk - Mean: 3.34, Std Dev: 2.64
Total Abs Acceleration: 25531.83
Total Abs Jerk: 68729.93

== Episode Acceleration, and Jerk ==
Eps Acceleration - Mean: 1.34, Std Dev: 0.37
Eps Jerk - Mean: 3.58, Std Dev: 0.95

#### d30

Data Analysis from: D:/RL/_1repertory_log/230616_data/data_collected_analyze_30d.json

== Rates ==
Success Rate: 65.3%
Collide Rate: 34.7%
Timeout Rate: 0.0%

== Time and Distance ==
== Step Velocity, Acceleration, and Jerk ==
Velocity - Mean: 1.36, Std Dev: 0.39
Acceleration - Mean: 0.57, Std Dev: 1.34
Jerk - Mean: -0.80, Std Dev: 4.18

== Absolute Values ==
Abs Acceleration - Mean: 1.16, Std Dev: 0.88
Abs Jerk - Mean: 3.30, Std Dev: 2.69
Total Abs Acceleration: 21119.22
Total Abs Jerk: 57702.00

== Episode Acceleration, and Jerk ==
Eps Acceleration - Mean: 1.33, Std Dev: 0.38
Eps Jerk - Mean: 3.64, Std Dev: 1.08

# none reward

---

#### d10

Data Analysis from: D:\RL\data\231217 reward对比实验\reward_func_test_231213\reward_test_d10\none\reward_test_data_collected_analyze_none_d10.json

== Rates ==
Success Rate: 87.5%
Collide Rate: 12.5%
Timeout Rate: 0.0%

== Time and Distance ==
Time - Mean: 2.9, Std Dev: 1.7
Distance - Mean: 4.59, Std Dev: 2.47

== Step Velocity, Acceleration, and Jerk ==
Velocity - Mean: 1.57, Std Dev: 0.44
Acceleration - Mean: 0.74, Std Dev: 1.80
Jerk - Mean: -0.92, Std Dev: 4.14

== Absolute Values ==
Abs Acceleration - Mean: 1.27, Std Dev: 0.95
Abs Jerk - Mean: 3.37, Std Dev: 2.58
Total Abs Acceleration: 31030.93
Total Abs Jerk: 79313.87

== Episode Acceleration, and Jerk ==
Eps Acceleration - Mean: 1.40, Std Dev: 0.37
Eps Jerk - Mean: 3.60, Std Dev: 0.89

---

#### d20

Data Analysis from: D:\RL\data\231217 reward对比实验\reward_func_test_231213\reward_test_d20\none\reward_test_data_collected_analyze_none_d20.json

== Rates ==
Success Rate: 78.6%
Collide Rate: 21.4%
Timeout Rate: 0.0%

== Time and Distance ==
Time - Mean: 2.9, Std Dev: 1.9
Distance - Mean: 4.25, Std Dev: 2.45

== Step Velocity, Acceleration, and Jerk ==
Velocity - Mean: 1.43, Std Dev: 0.44
Acceleration - Mean: 0.58, Std Dev: 1.41
Jerk - Mean: -0.83, Std Dev: 4.24

== Absolute Values ==
Abs Acceleration - Mean: 1.19, Std Dev: 0.92
Abs Jerk - Mean: 3.35, Std Dev: 2.73
Total Abs Acceleration: 26560.44
Total Abs Jerk: 72302.71

== Episode Acceleration, and Jerk ==
Eps Acceleration - Mean: 1.32, Std Dev: 0.35
Eps Jerk - Mean: 3.55, Std Dev: 0.94

---

#### d30

Data Analysis from: D:\RL\data\231217 reward对比实验\reward_func_test_231213\reward_test_d30\all_reward\test_2\reward_test_analyze_all_reward_d30.json

== Rates ==
Success Rate: 67.7%
Collide Rate: 32.3%
Timeout Rate: 0.0%

== Time and Distance ==
Time - Mean: 3.0, Std Dev: 2.0
Distance - Mean: 4.18, Std Dev: 2.43

== Step Velocity, Acceleration, and Jerk ==
Velocity - Mean: 1.38, Std Dev: 0.43
Acceleration - Mean: 0.92, Std Dev: 1.76
Jerk - Mean: -0.76, Std Dev: 4.29

== Absolute Values ==
Abs Acceleration - Mean: 1.14, Std Dev: 0.89
Abs Jerk - Mean: 3.33, Std Dev: 2.81
Total Abs Acceleration: 22602.19
Total Abs Jerk: 63918.94

== Episode Acceleration, and Jerk ==
Eps Acceleration - Mean: 1.27, Std Dev: 0.36
Eps Jerk - Mean: 3.53, Std Dev: 0.97

# all reward

## test 1

### param 231215

---

#### d10

Data Analysis from: D:\RL\data\231217 reward对比实验\reward_func_test_231213\reward_test_d10\all_reward\reward_test_analyze_all_reward_d10.json

== Rates ==
Success Rate: 87.1%
Collide Rate: 12.9%
Timeout Rate: 0.0%

== Time and Distance ==
Time - Mean: 2.9, Std Dev: 1.7
Distance - Mean: 4.59, Std Dev: 2.49

== Step Velocity, Acceleration, and Jerk ==
Velocity - Mean: 1.57, Std Dev: 0.45
Acceleration - Mean: 0.23, Std Dev: 1.17
Jerk - Mean: -0.93, Std Dev: 4.09

== Absolute Values ==
Abs Acceleration - Mean: 1.27, Std Dev: 0.95
Abs Jerk - Mean: 3.34, Std Dev: 2.54
Total Abs Acceleration: 30725.28
Total Abs Jerk: 78098.61

== Episode Acceleration, and Jerk ==
Eps Acceleration - Mean: 1.39, Std Dev: 0.37
Eps Jerk - Mean: 3.57, Std Dev: 0.88

---

#### d20

/root/flat_ped_sim/src/d86env/reward_func_test_231213/reward_test_d20/all_reward/reward_test_analyze_all_reward_d20.json
Success rate: 0.774
Collide rate: 0.226
Timeout rate: 0.0
Time mean and std: (2.864857881136951, 1.832051748803288)
Distance mean and std: (4.116381276064551, 2.3734023866140666)
Velocity mean and std: (1.4266758045200347, 0.44071965438996275)
Acceleration mean and std: (0.5859809694348437, 1.3938397026551959)
Jerk mean and std: (-0.8611307405604194, 4.1383909872040325)

---

#### d30

Data Analysis from: D:\RL\data\231217 reward对比实验\reward_func_test_231213\reward_test_d20\all_reward\test_1\新建文件夹\reward_test_analyze_all_reward_d30.json

== Rates ==
Success Rate: 69.2%
Collide Rate: 30.8%
Timeout Rate: 0.0%

== Time and Distance ==
Time - Mean: 3.0, Std Dev: 2.0
Distance - Mean: 4.17, Std Dev: 2.42

== Step Velocity, Acceleration, and Jerk ==
Velocity - Mean: 1.38, Std Dev: 0.43
Acceleration - Mean: 0.92, Std Dev: 1.77
Jerk - Mean: -0.76, Std Dev: 4.47

== Absolute Values ==
Abs Acceleration - Mean: 1.15, Std Dev: 0.90
Abs Jerk - Mean: 3.41, Std Dev: 3.00
Total Abs Acceleration: 23303.98
Total Abs Jerk: 66411.68

== Episode Acceleration, and Jerk ==
Eps Acceleration - Mean: 1.28, Std Dev: 0.36
Eps Jerk - Mean: 3.57, Std Dev: 1.03

> /root/flat_ped_sim/src/d86env/reward_func_test_231213/reward_test_d30/all_reward/reward_test_analyze_all_reward_d30.json
> Success rate: 0.688
> Collide rate: 0.312
> Timeout rate: 0.0
> Time mean and std: (3.073982558139535, 2.1063388162871868)
> Distance mean and std: (4.184132827406217, 2.5663540484752585)
> Velocity mean and std: (1.362026326826189, 0.43980707359735094)
> Acceleration mean and std: (0.5108553475181843, 1.3548434873725548)
> Jerk mean and std: (-0.7152663635214283, 4.4028104702404445)

```python
def _cal_reward_rule_d86_test(self, laser_scan: np.ndarray, goal_in_robot_frame: Tuple[float, float],goal_in_robot_frame_ltrajp: Tuple[float, float], *args, **kwargs):
        self._curr_action = kwargs["action"]
        laser_min = laser_scan.min()
        s = None
        plan_success = False

        # if VIS:
        #     print(time.time(),(kwargs["robot_pose"].x,kwargs["robot_pose"].y))
        #     print("plan:",kwargs["global_plan"])
        slow_speed_penalty_factor = 0.01
        smooth_penalty_factor = 0.008

        if kwargs["plan_result"][0] is not None and kwargs["plan_result"][0][0]:
            plan_success = True
            convex_plan_result,polar_action_and_opt_action = kwargs["plan_result"]
            success,cost,mpc_traj_robot,action_points = convex_plan_result      
            polar_action,opt_polar_action = polar_action_and_opt_action

            # s,dtheta = self._calc_robot_pos_s(kwargs["global_plan"], (ctrl_points[0][-1],ctrl_points[1][-1]), (ctrl_points[2][-1],ctrl_points[3][-1]))
            
            self. _reward_ctrl_points(
                polar_action_and_opt_action,
                mpc_traj_robot,
                # track_penalty_factor = 0.0375,
                # speedup_penalty_factor = 0.05,
                # smooth_penalty_factor = 0.0,
                # output_change_penalty_factor = 0.075
                track_penalty_factor = 0.1, # track dist error 1m -> 0.1
                # speedup_penalty_factor = 0.1, # avg speed 0.25 -> 0.05 
                speedup_penalty_factor = 0.01, # avg speed 0.25 -> 0.05 
                smooth_penalty_factor = 0.15, # all smooth error 10 -> 0.05
                output_change_penalty_factor = 0.1 # all change dist 1m -> 0.1
            )


            # 平滑性惩罚（e2e_smooth_penalty）：目的是使机器人的运动更平滑，通过比较当前时刻与上一时刻的速度差异来计算。
            # 如果速度变化大，这个惩罚项值较大，减少总奖励，鼓励机器人运动平稳。
            e2e_smooth_penalty = 0.
            if self.last_vel is not None:
                e2e_smooth_penalty = abs(kwargs["robot_vel"].x - self.last_vel.x)/0.1/2. + abs(kwargs["robot_vel"].y - self.last_vel.y)/0.1/2.
            else:
                e2e_smooth_penalty = abs(kwargs["robot_vel"].x)/0.1/2. + abs(kwargs["robot_vel"].y)/0.1/2.
            
            # 低速惩罚（e2e_slow_speed_penalty）：鼓励机器人保持一定的速度。通过比较当前速度与设定阈值的差异来计算。
            # 如果速度过低，惩罚项值较大，同样减少总奖励，促使机器人维持适当速度。
            e2e_slow_speed_penalty = (1. - np.hypot(kwargs["robot_vel"].x,kwargs["robot_vel"].y)/3.53554)
            
            self.total_max_speed -= e2e_slow_speed_penalty*slow_speed_penalty_factor
            self.total_smooth -= e2e_smooth_penalty*smooth_penalty_factor

            self.curr_reward -= e2e_slow_speed_penalty*slow_speed_penalty_factor
            self.curr_reward -= e2e_smooth_penalty*smooth_penalty_factor
            
            if VIS:
                print("speed up penlty:")
                print("-e2e_slow_speed_penalty:",-e2e_slow_speed_penalty)
                print("-e2e_slow_speed_penalty*slow_speed_penalty_factor:",-e2e_slow_speed_penalty*slow_speed_penalty_factor)
                print("smmoth penlty:")
                print("-e2e_smooth_penalty:",-e2e_smooth_penalty)
                print("-e2e_smooth_penalty*smooth_penalty_factor:",-e2e_smooth_penalty*smooth_penalty_factor)


            last_dist = self.last_goal_dist_ltrajp
            dist = goal_in_robot_frame_ltrajp
            # last_dist = self.last_goal_dist
            # dist = goal_in_robot_frame

            # r_a2
            self._reward_goal_approached(
                last_dist,
                dist, 
                # reward_factor=1.8, 
                # penalty_factor=1.8,
                # theta_penalty_factor = 0.5

                # reward_factor=5., 
                # penalty_factor=5.,
                # theta_penalty_factor = 0.5,

                reward_factor=1, 
                penalty_factor=0.6,
                theta_penalty_factor = 0.,
                close_penalty_limit = 1.5
            )
            # if not kwargs["galaxy_success"]:                
            #     self.curr_reward -= 0.2
        else:
            # 规划失败惩罚
            # if self.last_goal_dist is not None:
            #     self.curr_reward -= 0.4

            # s,dtheta = self._calc_robot_pos_s(kwargs["global_plan"], (kwargs["robot_pose"].x,kwargs["robot_pose"].y), (kwargs["robot_vel"].x,kwargs["robot_vel"].y))
            
            # 平滑性惩罚（e2e_smooth_penalty）：目的是使机器人的运动更平滑，通过比较当前时刻与上一时刻的速度差异来计算。
            # 如果速度变化大，这个惩罚项值较大，减少总奖励，鼓励机器人运动平稳。
            e2e_smooth_penalty = 0.
            if self.last_vel is not None:
                e2e_smooth_penalty = abs(kwargs["robot_vel"].x - self.last_vel.x)/0.1/2. + abs(kwargs["robot_vel"].y - self.last_vel.y)/0.1/2.
            else:
                e2e_smooth_penalty = abs(kwargs["robot_vel"].x)/0.1/2. + abs(kwargs["robot_vel"].y)/0.1/2.
            
            # 低速惩罚（e2e_slow_speed_penalty）：鼓励机器人保持一定的速度。通过比较当前速度与设定阈值的差异来计算。
            # 如果速度过低，惩罚项值较大，同样减少总奖励，促使机器人维持适当速度。
            e2e_slow_speed_penalty = (1. - np.hypot(kwargs["robot_vel"].x,kwargs["robot_vel"].y)/3.53554)
            
            self.total_max_speed -= e2e_slow_speed_penalty*slow_speed_penalty_factor
            self.total_smooth -= e2e_smooth_penalty*smooth_penalty_factor

            self.curr_reward -= e2e_slow_speed_penalty*slow_speed_penalty_factor
            self.curr_reward -= e2e_smooth_penalty*smooth_penalty_factor
            
            last_dist = self.last_goal_dist
            dist = goal_in_robot_frame
            if VIS:
                print("speed up penlty:",-e2e_slow_speed_penalty*slow_speed_penalty_factor)
                print("smmoth penlty:",-e2e_smooth_penalty*smooth_penalty_factor)

            # r_a2
            self._reward_goal_approached(
                last_dist,
                dist, 
                # reward_factor=1.8, 
                # penalty_factor=1.8,
                # theta_penalty_factor = 0.5

                # reward_factor=5., 
                # penalty_factor=5.,
                # theta_penalty_factor = 0.5,

                reward_factor=0.5, 
                penalty_factor=0.5,
                theta_penalty_factor = 0.,
                close_penalty_limit = 1.5
            )
        
        # r_s reward=125.
        self._reward_goal_reached(goal_in_robot_frame, reward=120.)
        # r_o
        self._reward_safe_dist_d86(laser_min,punish_range = 1., punishment=1.5,w_obs=1.8) # 靠近惩罚
        # 碰撞惩罚 punishment=5.
        self._reward_collision_d86(laser_min, punishment=30.) # 碰撞惩罚

        # self._reward_goal_reached(goal_in_robot_frame, reward=100.)
        # # self._reward_safe_dist_d86(laser_min,punish_range = 2., punishment=1.) # 靠近惩罚
        # self._reward_collision_d86(laser_min, punishment=40.) # 碰撞惩罚
        # 最小化输出控制点变动
        
        self.last_vel = kwargs["robot_vel"]
        self.last_goal_dist = goal_in_robot_frame[0]
        if plan_success:
            self.last_goal_dist_ltrajp = goal_in_robot_frame_ltrajp[0]
            # self.last_action = ctrl_points
            self.last_action = self._curr_action
        else:
            self.last_goal_dist_ltrajp = None
            self.last_action = None

        if VIS:
            print("curr_reward:")
            print(self.curr_reward)
        self.total += self.curr_reward
```



## test 2

### param 231215

---

#### d20

Data Analysis from: D:\RL\data\231217 reward对比实验\reward_func_test_231213\reward_test_d20\all_reward\test_2\reward_test_analyze_all_reward_d20.json

== Rates ==
Success Rate: 78.1%
Collide Rate: 21.9%
Timeout Rate: 0.0%

== Time and Distance ==
Time - Mean: 2.9, Std Dev: 1.8
Distance - Mean: 4.12, Std Dev: 2.40

== Step Velocity, Acceleration, and Jerk ==
Velocity - Mean: 1.42, Std Dev: 0.44
Acceleration - Mean: 0.58, Std Dev: 1.42
Jerk - Mean: -0.85, Std Dev: 4.24

== Absolute Values ==
Abs Acceleration - Mean: 1.20, Std Dev: 0.92
Abs Jerk - Mean: 3.36, Std Dev: 2.72
Total Abs Acceleration: 26011.45
Total Abs Jerk: 70018.86

== Episode Acceleration, and Jerk ==
Eps Acceleration - Mean: 1.33, Std Dev: 0.35
Eps Jerk - Mean: 3.56, Std Dev: 0.94

---

#### d30

Data Analysis from: D:\RL\data\231217 reward对比实验\reward_func_test_231213\reward_test_d30\all_reward\test_2\reward_test_analyze_all_reward_d30 copy.json

== Rates ==
Success Rate: 68.5%
Collide Rate: 31.5%
Timeout Rate: 0.0%

== Time and Distance ==
Time - Mean: 3.1, Std Dev: 2.1
Distance - Mean: 4.22, Std Dev: 2.47

== Step Velocity, Acceleration, and Jerk ==
Velocity - Mean: 1.36, Std Dev: 0.44
Acceleration - Mean: 0.92, Std Dev: 1.76
Jerk - Mean: -0.72, Std Dev: 4.31

== Absolute Values ==
Abs Acceleration - Mean: 1.13, Std Dev: 0.89
Abs Jerk - Mean: 3.32, Std Dev: 2.83
Total Abs Acceleration: 9984.65
Total Abs Jerk: 28495.45

== Episode Acceleration, and Jerk ==
Eps Acceleration - Mean: 1.26, Std Dev: 0.37
Eps Jerk - Mean: 3.51, Std Dev: 0.98



```python
    def _cal_reward_rule_d86_test(self, laser_scan: np.ndarray, goal_in_robot_frame: Tuple[float, float],goal_in_robot_frame_ltrajp: Tuple[float, float], *args, **kwargs):
        self._curr_action = kwargs["action"]
        laser_min = laser_scan.min()
        s = None
        plan_success = False

        slow_speed_penalty_factor = 0.01
        smooth_penalty_factor = 0.008

        if kwargs["plan_result"][0] is not None and kwargs["plan_result"][0][0]:
            plan_success = True
            convex_plan_result,polar_action_and_opt_action = kwargs["plan_result"]
            success,cost,mpc_traj_robot,action_points = convex_plan_result      
            polar_action,opt_polar_action = polar_action_and_opt_action

            self. _reward_ctrl_points(
                polar_action_and_opt_action,
                mpc_traj_robot,
                track_penalty_factor = 0.15, # track dist error 1m -> 0.1
                # speedup_penalty_factor = 0.1, # avg speed 0.25 -> 0.05 
                # speedup_penalty_factor = 0.01, # avg speed 0.25 -> 0.05 
                # smooth_penalty_factor = 0.15, # all smooth error 10 -> 0.05
                output_change_penalty_factor = 0.15, # all change dist 1m -> 0.1
                limit= 1.2
            )


            # 平滑性惩罚（e2e_smooth_penalty）：目的是使机器人的运动更平滑，通过比较当前时刻与上一时刻的速度差异来计算。
            # 如果速度变化大，这个惩罚项值较大，减少总奖励，鼓励机器人运动平稳。
            e2e_smooth_penalty = 0.
            if self.last_vel is not None:
                e2e_smooth_penalty = abs(kwargs["robot_vel"].x - self.last_vel.x)/0.1/2. + abs(kwargs["robot_vel"].y - self.last_vel.y)/0.1/2.
            else:
                e2e_smooth_penalty = abs(kwargs["robot_vel"].x)/0.1/2. + abs(kwargs["robot_vel"].y)/0.1/2.
            
            # 低速惩罚（e2e_slow_speed_penalty）：鼓励机器人保持一定的速度。通过比较当前速度与设定阈值的差异来计算。
            # 如果速度过低，惩罚项值较大，同样减少总奖励，促使机器人维持适当速度。
            e2e_slow_speed_penalty = (1. - np.hypot(kwargs["robot_vel"].x,kwargs["robot_vel"].y)/3.53554)
            
            self.total_max_speed -= e2e_slow_speed_penalty*slow_speed_penalty_factor
            self.total_smooth -= e2e_smooth_penalty*smooth_penalty_factor

            self.curr_reward -= e2e_slow_speed_penalty*slow_speed_penalty_factor
            self.curr_reward -= e2e_smooth_penalty*smooth_penalty_factor
            
            if VIS:
                print("speed up penlty:")
                print("-e2e_slow_speed_penalty:",-e2e_slow_speed_penalty)
                print("-e2e_slow_speed_penalty*slow_speed_penalty_factor:",-e2e_slow_speed_penalty*slow_speed_penalty_factor)
                print("smmoth penlty:")
                print("-e2e_smooth_penalty:",-e2e_smooth_penalty)
                print("-e2e_smooth_penalty*smooth_penalty_factor:",-e2e_smooth_penalty*smooth_penalty_factor)


            last_dist = self.last_goal_dist_ltrajp
            dist = goal_in_robot_frame_ltrajp
            # last_dist = self.last_goal_dist
            # dist = goal_in_robot_frame

            # r_a2
            self._reward_goal_approached(
                last_dist,
                dist, 
                reward_factor=3., 
                penalty_factor=2.,
                theta_penalty_factor = 0.,
                close_penalty_limit = 1.5
            )
            # if not kwargs["galaxy_success"]:                
            #     self.curr_reward -= 0.2
        else:

            # 平滑性惩罚（e2e_smooth_penalty）：目的是使机器人的运动更平滑，通过比较当前时刻与上一时刻的速度差异来计算。
            # 如果速度变化大，这个惩罚项值较大，减少总奖励，鼓励机器人运动平稳。
            e2e_smooth_penalty = 0.
            if self.last_vel is not None:
                e2e_smooth_penalty = abs(kwargs["robot_vel"].x - self.last_vel.x)/0.1/2. + abs(kwargs["robot_vel"].y - self.last_vel.y)/0.1/2.
            else:
                e2e_smooth_penalty = abs(kwargs["robot_vel"].x)/0.1/2. + abs(kwargs["robot_vel"].y)/0.1/2.
            
            # 低速惩罚（e2e_slow_speed_penalty）：鼓励机器人保持一定的速度。通过比较当前速度与设定阈值的差异来计算。
            # 如果速度过低，惩罚项值较大，同样减少总奖励，促使机器人维持适当速度。
            e2e_slow_speed_penalty = (1. - np.hypot(kwargs["robot_vel"].x,kwargs["robot_vel"].y)/3.53554)
            
            self.total_max_speed -= e2e_slow_speed_penalty*slow_speed_penalty_factor
            self.total_smooth -= e2e_smooth_penalty*smooth_penalty_factor

            self.curr_reward -= e2e_slow_speed_penalty*slow_speed_penalty_factor
            self.curr_reward -= e2e_smooth_penalty*smooth_penalty_factor
            
            last_dist = self.last_goal_dist
            dist = goal_in_robot_frame
            if VIS:
                print("speed up penlty:",-e2e_slow_speed_penalty*slow_speed_penalty_factor)
                print("smmoth penlty:",-e2e_smooth_penalty*smooth_penalty_factor)

            # r_a2
            self._reward_goal_approached(
                last_dist,
                dist, 
                reward_factor=3., 
                penalty_factor=2.,
                theta_penalty_factor = 0.,
                close_penalty_limit = 1.5
            )
        
        # r_s reward=125.
        self._reward_goal_reached(goal_in_robot_frame, reward=140.)
        # r_o
        self._reward_safe_dist_d86(laser_min,punish_range = 2.0, punishment=1.8,w_obs=2) # 靠近惩罚
        # 碰撞惩罚 punishment=5.
        self._reward_collision_d86(laser_min, punishment=30.) # 碰撞惩罚
        
        self.last_vel = kwargs["robot_vel"]
        self.last_goal_dist = goal_in_robot_frame[0]
        if plan_success:
            self.last_goal_dist_ltrajp = goal_in_robot_frame_ltrajp[0]
            # self.last_action = ctrl_points
            self.last_action = self._curr_action
        else:
            self.last_goal_dist_ltrajp = None
            self.last_action = None

        if VIS:
            print("curr_reward:")
            print(self.curr_reward)
        self.total += self.curr_reward
```

 

# reward no change

## test 2

---

#### d10

Data Analysis from: D:\RL\data\231217 reward对比实验\240104_reward_none_and_all_compare\reward_no_change\reward_test_analyze_no_change_reward_d10.json

== Rates ==
Success Rate: 87.8%
Collide Rate: 12.2%
Timeout Rate: 0.0%

== Time and Distance ==
Time - Mean: 2.9, Std Dev: 1.7
Distance - Mean: 4.65, Std Dev: 2.50

== Step Velocity, Acceleration, and Jerk ==
Velocity - Mean: 1.57, Std Dev: 0.44
Acceleration - Mean: 0.61, Std Dev: 1.45
Jerk - Mean: -0.91, Std Dev: 4.15

== Absolute Values ==
Abs Acceleration - Mean: 1.26, Std Dev: 0.94
Abs Jerk - Mean: 3.35, Std Dev: 2.61
Total Abs Acceleration: 27600.56
Total Abs Jerk: 70672.31

== Episode Acceleration, and Jerk ==
Eps Acceleration - Mean: 1.39, Std Dev: 0.37
Eps Jerk - Mean: 3.59, Std Dev: 0.89

---

#### d20

Data Analysis from: D:\RL\data\231217 reward对比实验\240104_reward_none_and_all_compare\reward_no_change\reward_test_analyze_no_change_reward_d20.json

== Rates ==
Success Rate: 77.3%
Collide Rate: 22.7%
Timeout Rate: 0.0%

== Time and Distance ==
Time - Mean: 2.8, Std Dev: 1.8
Distance - Mean: 4.10, Std Dev: 2.35

== Step Velocity, Acceleration, and Jerk ==
Velocity - Mean: 1.43, Std Dev: 0.43
Acceleration - Mean: 0.60, Std Dev: 1.40
Jerk - Mean: -0.87, Std Dev: 4.21

== Absolute Values ==
Abs Acceleration - Mean: 1.21, Std Dev: 0.93
Abs Jerk - Mean: 3.36, Std Dev: 2.68
Total Abs Acceleration: 25591.14
Total Abs Jerk: 68427.80

== Episode Acceleration, and Jerk ==
Eps Acceleration - Mean: 1.34, Std Dev: 0.35
Eps Jerk - Mean: 3.57, Std Dev: 0.95

#### d30



# reward no track

## test 2

---

#### d10

Data Analysis from: D:\RL\data\231217 reward对比实验\reward_func_test_231213\reward_test_d10\reward_no_track\reward_test_analyze_no_track_reward_d10.json

== Rates ==
Success Rate: 84.8%
Collide Rate: 15.2%
Timeout Rate: 0.0%

== Time and Distance ==
Time - Mean: 3.4, Std Dev: 2.3
Distance - Mean: 4.38, Std Dev: 2.31

== Step Velocity, Acceleration, and Jerk ==
Velocity - Mean: 1.40, Std Dev: 0.46
Acceleration - Mean: 0.20, Std Dev: 0.85
Jerk - Mean: -0.71, Std Dev: 3.44

== Absolute Values ==
Abs Acceleration - Mean: 1.01, Std Dev: 0.87
Abs Jerk - Mean: 2.59, Std Dev: 2.37
Total Abs Acceleration: 27781.34
Total Abs Jerk: 69363.60

== Episode Acceleration, and Jerk ==
Eps Acceleration - Mean: 1.25, Std Dev: 0.46
Eps Jerk - Mean: 3.20, Std Dev: 1.15

---

# compare

## reward_all**

### 10d**

Data Analysis from: D:\RL\data\231217 reward对比实验\240104_reward_none_and_all_compare\reward_all\reward_test_analyze_all_reward_d10.json

== Rates ==

Success Rate: 87.1%

Collide Rate: 12.9%

Timeout Rate: 0.0%

== Time and Distance ==

Time - Mean: 2.9, Std Dev: 1.7

Distance - Mean: 4.59, Std Dev: 2.49

== Step Velocity, Acceleration, and Jerk ==

Velocity - Mean: 1.57, Std Dev: 0.45

Acceleration - Mean: 0.62, Std Dev: 1.46

Jerk - Mean: -0.93, Std Dev: 4.09

== Absolute Values ==

Abs Acceleration - Mean: 1.27, Std Dev: 0.95

Abs Jerk - Mean: 3.34, Std Dev: 2.53

Total Abs Acceleration: 26475.46

Total Abs Jerk: 67010.30

== Episode Acceleration, and Jerk ==

Eps Acceleration - Mean: 1.39, Std Dev: 0.37

Eps Jerk - Mean: 3.58, Std Dev: 0.88

### 20d**

Data Analysis from: D:\RL\data\231217 reward对比实验\240104_reward_none_and_all_compare\reward_all\reward_test_analyze_all_reward_d20.json

== Rates ==

Success Rate: 78.1%

Collide Rate: 21.9%

Timeout Rate: 0.0%

== Time and Distance ==

Time - Mean: 2.9, Std Dev: 1.8

Distance - Mean: 4.12, Std Dev: 2.40

== Step Velocity, Acceleration, and Jerk ==

Velocity - Mean: 1.42, Std Dev: 0.44

Acceleration - Mean: 0.58, Std Dev: 1.40

Jerk - Mean: -0.86, Std Dev: 4.20

== Absolute Values ==

Abs Acceleration - Mean: 1.20, Std Dev: 0.93

Abs Jerk - Mean: 3.31, Std Dev: 2.72

Total Abs Acceleration: 19507.60

Total Abs Jerk: 52060.03

== Episode Acceleration, and Jerk ==

Eps Acceleration - Mean: 1.33, Std Dev: 0.35

Eps Jerk - Mean: 3.53, Std Dev: 0.94

### 30d**

Data Analysis from: D:\RL\data\231217 reward对比实验\240104_reward_none_and_all_compare\reward_all\reward_test_analyze_all_reward_d30.json

== Rates ==

Success Rate: 68.5%

Collide Rate: 31.5%

Timeout Rate: 0.0%

== Time and Distance ==

Time - Mean: 3.1, Std Dev: 2.1

Distance - Mean: 4.22, Std Dev: 2.47

== Step Velocity, Acceleration, and Jerk ==

Velocity - Mean: 1.36, Std Dev: 0.44

Acceleration - Mean: 0.49, Std Dev: 1.33

Jerk - Mean: -0.69, Std Dev: 4.35

== Absolute Values ==

Abs Acceleration - Mean: 1.10, Std Dev: 0.89

Abs Jerk - Mean: 3.30, Std Dev: 2.92

Total Abs Acceleration: 6348.57

Total Abs Jerk: 18432.07

== Episode Acceleration, and Jerk ==

Eps Acceleration - Mean: 1.25, Std Dev: 0.38

Eps Jerk - Mean: 3.49, Std Dev: 1.00

## reward_no_change**

### 10d**

Data Analysis from: D:\RL\data\231217 reward对比实验\240104_reward_none_and_all_compare\reward_no_change\reward_test_analyze_no_change_reward_d10.json

== Rates ==

Success Rate: 87.8%

Collide Rate: 12.2%

Timeout Rate: 0.0%

== Time and Distance ==

Time - Mean: 2.9, Std Dev: 1.7

Distance - Mean: 4.65, Std Dev: 2.50

== Step Velocity, Acceleration, and Jerk ==

Velocity - Mean: 1.57, Std Dev: 0.44

Acceleration - Mean: 0.61, Std Dev: 1.45

Jerk - Mean: -0.91, Std Dev: 4.15

== Absolute Values ==

Abs Acceleration - Mean: 1.26, Std Dev: 0.94

Abs Jerk - Mean: 3.35, Std Dev: 2.61

Total Abs Acceleration: 27600.56

Total Abs Jerk: 70672.31

== Episode Acceleration, and Jerk ==

Eps Acceleration - Mean: 1.39, Std Dev: 0.37

Eps Jerk - Mean: 3.59, Std Dev: 0.89

### 20d**

Data Analysis from: D:\RL\data\231217 reward对比实验\240104_reward_none_and_all_compare\reward_no_change\reward_test_analyze_no_change_reward_d20.json

== Rates ==

Success Rate: 77.3%

Collide Rate: 22.7%

Timeout Rate: 0.0%

== Time and Distance ==

Time - Mean: 2.8, Std Dev: 1.8

Distance - Mean: 4.10, Std Dev: 2.35

== Step Velocity, Acceleration, and Jerk ==

Velocity - Mean: 1.43, Std Dev: 0.43

Acceleration - Mean: 0.60, Std Dev: 1.41

Jerk - Mean: -0.88, Std Dev: 4.25

== Absolute Values ==

Abs Acceleration - Mean: 1.22, Std Dev: 0.92

Abs Jerk - Mean: 3.39, Std Dev: 2.70

Total Abs Acceleration: 20397.66

Total Abs Jerk: 54818.40

== Episode Acceleration, and Jerk ==

Eps Acceleration - Mean: 1.35, Std Dev: 0.35

Eps Jerk - Mean: 3.60, Std Dev: 0.95

### 30d**

Data Analysis from: D:\RL\data\231217 reward对比实验\240104_reward_none_and_all_compare\reward_no_change\reward_test_analyze_no_change_reward_d30.json

== Rates ==

Success Rate: 69.9%

Collide Rate: 30.1%

Timeout Rate: 0.0%

== Time and Distance ==

Time - Mean: 3.0, Std Dev: 2.0

Distance - Mean: 4.15, Std Dev: 2.42

== Step Velocity, Acceleration, and Jerk ==

Velocity - Mean: 1.37, Std Dev: 0.44

Acceleration - Mean: 0.50, Std Dev: 1.33

Jerk - Mean: -0.72, Std Dev: 4.29

== Absolute Values ==

Abs Acceleration - Mean: 1.12, Std Dev: 0.88

Abs Jerk - Mean: 3.31, Std Dev: 2.82

Total Abs Acceleration: 7218.53

Total Abs Jerk: 20649.62

== Episode Acceleration, and Jerk ==

Eps Acceleration - Mean: 1.25, Std Dev: 0.36

Eps Jerk - Mean: 3.49, Std Dev: 1.00

## reward_no_track**

### 10d**

Data Analysis from: D:\RL\data\231217 reward对比实验\240104_reward_none_and_all_compare\reward_no_track\reward_test_analyze_no_track_reward_d10.json

== Rates ==

Success Rate: 84.8%

Collide Rate: 15.2%

Timeout Rate: 0.0%

== Time and Distance ==

Time - Mean: 3.4, Std Dev: 2.3

Distance - Mean: 4.38, Std Dev: 2.31

== Step Velocity, Acceleration, and Jerk ==

Velocity - Mean: 1.40, Std Dev: 0.46

Acceleration - Mean: 0.50, Std Dev: 1.23

Jerk - Mean: -0.71, Std Dev: 3.44

== Absolute Values ==

Abs Acceleration - Mean: 1.01, Std Dev: 0.87

Abs Jerk - Mean: 2.59, Std Dev: 2.37

Total Abs Acceleration: 27781.34

Total Abs Jerk: 69363.60

== Episode Acceleration, and Jerk ==

Eps Acceleration - Mean: 1.25, Std Dev: 0.46

Eps Jerk - Mean: 3.20, Std Dev: 1.15

### 20d**

Data Analysis from: D:\RL\data\231217 reward对比实验\240104_reward_none_and_all_compare\reward_no_track\reward_test_analyze_no_track_reward_d20.json

== Rates ==

Success Rate: 73.1%

Collide Rate: 26.9%

Timeout Rate: 0.0%

== Time and Distance ==

Time - Mean: 3.4, Std Dev: 3.0

Distance - Mean: 3.85, Std Dev: 2.18

== Step Velocity, Acceleration, and Jerk ==

Velocity - Mean: 1.25, Std Dev: 0.45

Acceleration - Mean: 0.47, Std Dev: 1.14

Jerk - Mean: -0.64, Std Dev: 3.24

== Absolute Values ==

Abs Acceleration - Mean: 0.90, Std Dev: 0.85

Abs Jerk - Mean: 2.32, Std Dev: 2.35

Total Abs Acceleration: 21988.81

Total Abs Jerk: 55084.71

== Episode Acceleration, and Jerk ==

Eps Acceleration - Mean: 1.18, Std Dev: 0.45

Eps Jerk - Mean: 3.03, Std Dev: 1.18

### 30d**

Data Analysis from: D:\RL\data\231217 reward对比实验\240104_reward_none_and_all_compare\reward_no_track\reward_test_analyze_no_track_reward_d30.json

== Rates ==

Success Rate: 67.1%

Collide Rate: 32.9%

Timeout Rate: 0.0%

== Time and Distance ==

Time - Mean: 3.6, Std Dev: 2.9

Distance - Mean: 3.98, Std Dev: 2.31

== Step Velocity, Acceleration, and Jerk ==

Velocity - Mean: 1.19, Std Dev: 0.43

Acceleration - Mean: 0.41, Std Dev: 1.08

Jerk - Mean: -0.52, Std Dev: 3.29

== Absolute Values ==

Abs Acceleration - Mean: 0.87, Std Dev: 0.76

Abs Jerk - Mean: 2.42, Std Dev: 2.30

Total Abs Acceleration: 6080.69

Total Abs Jerk: 16431.67

== Episode Acceleration, and Jerk ==

Eps Acceleration - Mean: 1.11, Std Dev: 0.43

Eps Jerk - Mean: 2.97, Std Dev: 1.07

## reward_none**

### 10d**

Data Analysis from: D:\RL\data\231217 reward对比实验\240104_reward_none_and_all_compare\reward_none\data_collected_analyze_10d.json

== Rates ==

Success Rate: 86.7%

Collide Rate: 13.3%

Timeout Rate: 0.0%

== Time and Distance ==

Time - Mean: 2.9, Std Dev: 1.7

Distance - Mean: 4.65, Std Dev: 2.51

== Step Velocity, Acceleration, and Jerk ==

Velocity - Mean: 1.58, Std Dev: 0.44

Acceleration - Mean: 0.61, Std Dev: 1.45

Jerk - Mean: -0.92, Std Dev: 4.07

== Absolute Values ==

Abs Acceleration - Mean: 1.25, Std Dev: 0.95

Abs Jerk - Mean: 3.32, Std Dev: 2.53

Total Abs Acceleration: 26460.66

Total Abs Jerk: 67539.67

== Episode Acceleration, and Jerk ==

Eps Acceleration - Mean: 1.38, Std Dev: 0.36

Eps Jerk - Mean: 3.56, Std Dev: 0.92

### 20d**

Data Analysis from: D:\RL\data\231217 reward对比实验\240104_reward_none_and_all_compare\reward_none\data_collected_analyze_20d.json

== Rates ==

Success Rate: 74.6%

Collide Rate: 25.4%

Timeout Rate: 0.0%

== Time and Distance ==

Time - Mean: 3.0, Std Dev: 1.8

Distance - Mean: 4.35, Std Dev: 2.43

== Step Velocity, Acceleration, and Jerk ==

Velocity - Mean: 1.46, Std Dev: 0.41

Acceleration - Mean: 0.57, Std Dev: 1.36

Jerk - Mean: -0.83, Std Dev: 4.10

== Absolute Values ==

Abs Acceleration - Mean: 1.18, Std Dev: 0.89

Abs Jerk - Mean: 3.28, Std Dev: 2.59

Total Abs Acceleration: 19950.77

Total Abs Jerk: 53375.55

== Episode Acceleration, and Jerk ==

Eps Acceleration - Mean: 1.33, Std Dev: 0.37

Eps Jerk - Mean: 3.54, Std Dev: 0.96

### 30d**

Data Analysis from: D:\RL\data\231217 reward对比实验\240104_reward_none_and_all_compare\reward_none\data_collected_analyze_30d.json

== Rates ==

Success Rate: 65.3%

Collide Rate: 34.7%

Timeout Rate: 0.0%

== Time and Distance ==

Time - Mean: 2.9, Std Dev: 2.0

Distance - Mean: 3.88, Std Dev: 2.23

== Step Velocity, Acceleration, and Jerk ==

Velocity - Mean: 1.36, Std Dev: 0.39

Acceleration - Mean: 0.61, Std Dev: 1.32

Jerk - Mean: -0.83, Std Dev: 4.21

== Absolute Values ==

Abs Acceleration - Mean: 1.17, Std Dev: 0.87

Abs Jerk - Mean: 3.31, Std Dev: 2.74

Total Abs Acceleration: 5668.30

Total Abs Jerk: 15419.02

== Episode Acceleration, and Jerk ==

Eps Acceleration - Mean: 1.33, Std Dev: 0.38

Eps Jerk - Mean: 3.64, Std Dev: 1.08



| Metric                  | 10d Reward All | 10d Reward No Change | 10d Reward No Track | 10d Reward None | 20d Reward All | 20d Reward No Change | 20d Reward No Track | 20d Reward None | 30d Reward All | 30d Reward No Change | 30d Reward No Track | 30d Reward None |
| ----------------------- | -------------- | -------------------- | ------------------- | --------------- | -------------- | -------------------- | ------------------- | --------------- | -------------- | -------------------- | ------------------- | --------------- |
| Success Rate            | 87.1%          | 87.8%                | 84.8%               | 86.7%           | 78.1%          | 77.3%                | 73.1%               | 74.6%           | 68.5%          | 69.9%                | 67.1%               | 65.3%           |
| Collide Rate            | 12.9%          | 12.2%                | 15.2%               | 13.3%           | 21.9%          | 22.7%                | 26.9%               | 25.4%           | 31.5%          | 30.1%                | 32.9%               | 34.7%           |
| Timeout Rate            | 0.0%           | 0.0%                 | 0.0%                | 0.0%            | 0.0%           | 0.0%                 | 0.0%                | 0.0%            | 0.0%           | 0.0%                 | 0.0%                | 0.0%            |
| Time - Mean             | 2.9            | 2.9                  | 3.4                 | 2.9             | 2.9            | 2.8                  | 3.4                 | 3.0             | 3.1            | 3.0                  | 3.6                 | 2.9             |
| Distance - Mean         | 4.59           | 4.65                 | 4.38                | 4.65            | 4.12           | 4.10                 | 3.85                | 4.35            | 4.22           | 4.15                 | 3.98                | 3.88            |
| Velocity - Mean         | 1.57           | 1.57                 | 1.40                | 1.58            | 1.42           | 1.43                 | 1.25                | 1.46            | 1.36           | 1.37                 | 1.19                | 1.36            |
| Acceleration - Mean     | 0.62           | 0.61                 | 0.50                | 0.61            | 0.58           | 0.60                 | 0.47                | 0.57            | 0.49           | 0.50                 | 0.41                | 0.61            |
| Jerk - Mean             | -0.93          | -0.91                | -0.71               | -0.92           | -0.86          | -0.88                | -0.64               | -0.83           | -0.69          | -0.72                | -0.52               | -0.83           |
| Abs Acceleration - Mean | 1.27           | 1.26                 | 1.01                | 1.25            | 1.20           | 1.22                 | 0.90                | 1.18            | 1.10           | 1.12                 | 0.87                | 1.17            |
| Abs Jerk - Mean         | 3.34           | 3.35                 | 2.59                | 3.32            | 3.31           | 3.39                 | 2.32                | 3.28            | 3.30           | 3.31                 | 2.42                | 3.31            |
| Total Abs Acceleration  | 26475.46       | 27600.56             | 27781.34            | 26460.66        | 19507.60       | 20397.66             | 21988.81            | 19950.77        | 6348.57        | 7218.53              | 6080.69             | 5668.30         |
| Total Abs Jerk          | 67010.30       | 70672.31             | 69363.60            | 67539.67        | 52060.03       | 54818.40             | 55084.71            | 53375.55        | 18432.07       | 20649.62             | 16431.67            | 15419.02        |
| Eps Acceleration - Mean | 1.39           | 1.39                 | 1.25                | 1.38            | 1.33           | 1.35                 | 1.18                | 1.33            | 1.25           | 1.25                 | 1.11                | 1.33            |
| Eps Jerk - Mean         | 3.58           | 3.59                 | 3.20                | 3.56            | 3.53           | 3.60                 | 3.03                | 3.54            | 3.49           | 3.49                 | 2.97                | 3.64            |